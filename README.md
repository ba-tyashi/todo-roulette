# todo-roulette

## サービス概要
どんなサービスなのかを３行で説明してください。

ToDoリストをルーレット形式で作業する順番を決めるアプリ。
作業リストを記入していき完了ボタンを押せばルーレットが自動生成され、「1/リストの母数」で記入したリストの作業順番が決まる。
優先度による重み付け(当選確率の操作)とご褒美の設定(休憩時間)、自身の好きな背景の設定も可能で育成要素も追加。

## このサービスへの思い・作りたい理由
このサービスの題材となるものに関してのエピソードがあれば詳しく教えてください。
このサービスを思いつくにあたって元となる思いがあれば詳しく教えてください。

私は仕事や私生活においても優柔不断なところがあります。
作業しないといけないタスクが多くある場合何から作業すればよいのか判断できない(決めるのに時間がかかる)ことがあります。
その決める時間が無駄、もったいないと思い本アプリを作成したいなと考えました。

## ユーザー層について
決めたユーザー層についてどうしてその層を対象にしたのかそれぞれ理由を教えてください。

ユーザー層は若年層を対象としてます。
対象にした理由は学生や仕事をしている方が多く、需要が高いのではないかと考えております。
また、1日の作業が多く少しでも時間の確保ができるようにするためです。

## ユーザーの獲得について
想定したユーザー層に対してそれぞれどのようにサービスを届けるのか現状考えていることがあれば教えてください。

優柔不断な友達に本アプリを利用してもらい広めていただくか、SNSなどで拡散する。

## サービスの差別化ポイント・推しポイント
似たようなサービスが存在する場合、そのサービスとの明確な差別化ポイントとその差別化ポイントのどこが優れているのか教えてください。
独自性の強いサービスの場合、このサービスの推しとなるポイントを教えてください。

優先度による重み付け: 優先度が高いタスクほどルーレットで当たりやすくする（当選確率の操作）。
ご褒美設定: タスクを完了させると、次に「休憩時間」や「おやつ」が当たるルーレットを回せるようにする。
背景の自由性:背景を自由に設定できる。
育成要素：タスクをこなしていくと経験値がたまっていく→卵からひよこ、ひよこから鳥、鳥から恐竜、恐竜から、、、、という風に育成要素がある(進化の分岐ルートも追加検討している。)

## 機能候補
現状作ろうと思っている機能、案段階の機能をしっかりと固まっていなくても構わないのでMVPリリース時に作っていたいもの、本リリースまでに作っていたいものをそれぞれ分けて教えてください。

【MVPリリース】
1. リスト作成欄（開始ボタン設置含む）
イメージ: RailsのScaffoldをベースに、入力フォームと「ルーレット開始！」ボタンを配置。
技術: Turbo Frames を使うと、ページ全体をリロードせずにタスクの追加・削除ができ、サクサク動くUIになる。

2. ルーレット自動生成（デザイン含む）
イメージ: 入力されたタスクを円グラフのように分割して表示。
技術: Winwheel.js などのJSライブラリを使うか、CSSの conic-gradient をタスク数に合わせて動的に生成すると、デザイン性が高いルーレットが作れる。

3. 優先度による重み付け
イメージ: 「高・中・低」で選んだ優先度に応じて、ルーレットの面積（当選確率）が変わる。
技術: Ruby側で重み付け計算ロジック（例：高=3票, 中=2票, 低=1票）を書き、その比率をJSに渡してルーレットの描画角度を決定する。

4. ご褒美設定
イメージ: 「タスク完了時に出現する宝箱」の中身を自分で設定。
技術: rewards テーブルを作成し、タスク完了フラグが立った際にランダムで一つのレコードを表示する。

【本リリース】
5. 背景の自由性
イメージ: ユーザーが好きな背景画像やテーマカラー（ダークモード等）を設定。
技術: Userモデルに background_color 等のカラムを追加し、CSS変数（Custom Properties）を使って画面全体のスタイルを動的に変更する。

6. 育成要素（進化分岐ルート含む）
イメージ: 完了したタスクの「カテゴリー」によって進化先が分岐。
技術:
例：Category.where(name: "勉強").count が多ければ「知的な恐竜」へ。
Rubyの service object（ビジネスロジックを切り出したクラス）を作り、進化判定ロジックをカプセル化するとコードが綺麗になる。

7. 進化図鑑（コレクション機能）: 一度進化したキャラを一覧で見れるページ。
イメージ：進化が発生した瞬間に、そのキャラクターのIDをユーザーのコレクションに保存します。
技術：Active Storage キャラクター画像を管理、多対多の関連付け User と Character の間に Collections（中間テーブル）を作成する。

8. ダッシュボード（統計）: カテゴリー別の完了率を Chartkick でグラフ表示。
イメージ：<%= pie_chart Task.group(:category).count %> のような短いコードで、カテゴリー別のタスク分布を円グラフ化できる。
技術：Chartkick Rubyで簡単にグラフを描画できる定番ライブラリ。Groupdate 日別やカテゴリー別の集計を簡単にするGem。

9. 効果音・演出: ルーレット回転時や進化時のサウンド（JSで制御）。
イメージ：ルーレットが回っている間は「カチカチ」という音を、当たった瞬間に「ファンファーレ」を鳴らします。
技術：JavaScript (Howler.js)　音声再生を制御する軽量ライブラリ。ブラウザの再生制限なども扱いやすくなる。CSS Animations / Canvas Confetti　進化時の紙吹雪演出なども。


10. タスクの自動クリーンアップ: 古い完了済みタスクを定期的に整理するバッチ処理（Active Job）。
イメージ：「完了から30日以上経過したタスク」を毎日深夜に自動削除、あるいはアーカイブ化します。Task.where('completed_at < ?', 30.days.ago).destroy_all というスクリプトを定期実行するよ　　　　　　うに設定する。
技術：Active Job　バックグラウンドで処理を実行するRailsの機能。Sidekiq または Solid Queue　ジョブの実行管理。Whenever 定期実行（Cron）を設定するGem。

## 使用する技術スタック
一般的なCRUD以外の実装予定の機能についてそれぞれどのようなイメージで実装する予定なのか現状考えているもので良いので教えて下さい。
サービスを実装するための技術スタックについて、以下のような観点で記載してください。
- 使用するフレームワーク（例：使用するフレームワークのバージョン情報等）
- データベース（MySQL / PostgreSQLなど）
- デプロイ先（Heroku / Renderなど）
- 使用予定のライブラリ

フレームワーク：Ruby on Rails 7.1.x (Ruby 3.2.3) ： Hotwire（Turbo/Stimulus）を使えば、JavaScriptを大量に書かずにリアルタイムな画面更新（経験値アップ演出など）が可能なため使用。
データベース：PostgreSQL : Render.com や Heroku での標準であり、JSON形式のデータ保存も得意なため、進化ログなどの保存に便利なため使用。
デプロイ先：Render.com ： 無料枠があり、GitHubと連携して簡単にデプロイできるため使用。
主要ライブラリ：Devise ： ユーザー管理（ログイン機能）のデファクトスタンダードです。「自分のキャラ」を保存するために必須。

gemの追加:
ruby "3.2.3"
1. gem "devise" (ユーザー管理)
   役割: ログイン機能。ユーザーごとに「自分の恐竜」や「タスク」を紐付けて保存する。

2. gem "chartkick" & gem "groupdate" (統計・分析)
   役割: カテゴリー別のタスク完了率や、日々の頑張りをグラフで可視化する。

3. gem "cloudinary" (画像ストレージ)
   役割: 進化したキャラクター画像をクラウドに保存。Renderの無料枠でも画像が消えないようにする。

4. gem "solid_queue" (非同期・定期処理)
   役割: 「完了から30日過ぎたタスクの自動削除」などのバックグラウンド処理を、追加のサーバーなしで実行する。

5. gem "tailwindcss-rails"　(デザイン)
   役割: 恐竜の育成画面やルーレットのUIを、爆速でモダンなデザインに整えます。

6. gem "font-awesome-sass", "~> 6.5.1" (アイコン)
   役割: タスクの優先度や、ご褒美メニューに使う視覚的なアイコン（剣、卵、肉など）を提供します。
